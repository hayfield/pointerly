<!DOCTYPE HTML> 
<html lang="en"> 
<head> 
	<title>Pointerly</title> 
	<meta charset="utf-8"> 
	<link rel="stylesheet" type="text/css" href="css/pointerly.css" />

	<script type="text/javascript" src="src/lib/Detector.js"></script> 
	<script type="text/javascript" src="src/lib/RequestAnimationFrame.js"></script>

	<script type="text/javascript" src="src/js/Pointerly.js"></script>

	<script type="text/javascript" src="src/js/core/Storage.js"></script>
	<script type="text/javascript" src="src/js/core/Logger.js"></script>
	<script type="text/javascript" src="src/js/core/Utils.js"></script>
	<script type="text/javascript" src="src/js/core/Scene.js"></script>
	<script type="text/javascript" src="src/js/core/Home.js"></script>
	<script type="text/javascript" src="src/js/core/Renderer.js"></script>
	<script type="text/javascript" src="src/js/core/Init.js"></script>

	<script type="text/javascript" src="src/js/display/Shape.js"></script>
	<script type="text/javascript" src="src/js/display/Shapes.js"></script>
	<script type="text/javascript" src="src/js/display/Triangle.js"></script>
	<script type="text/javascript" src="src/js/display/Circle.js"></script>
	<script type="text/javascript" src="src/js/display/Rectangle.js"></script>

	<script type="text/javascript" src="src/js/display/ShapeGeneration.js"></script>

	<script type="text/javascript" src="src/js/environment/ClickHandler.js"></script>
	<script type="text/javascript" src="src/js/environment/Environment.js"></script>
	
</head> 
<body>

<script type="text/javascript">
var positions = [200,400,600,800],
	widths = [16,32,48,64],
	combinations = [],
	shouldGenerateShapes = true;

for(var i = 0; i < positions.length; i++){
	for(var j = 0; j < widths.length; j++){
		combinations.push({
			position: positions[i],
			width: widths[j]
		});
	}
}

combinations.sort(function(){
	return Math.random - 0.5;
});

var setup = {
	shapeLayout: function( environment ){
		if( shouldGenerateShapes ){
			var element = combinations.shift(),
				canvas = environment.renderer.domElement;
			shouldGenerateShapes = false;
			environment.addShape(new Pointerly.Shapes.Rectangle({
				width: element.width,
				height: canvas.height,
				position: new Pointerly.Vector2( canvas.width/2-(element.position/2 * (Math.random() < 0.5 ? -1 : 1)), 0 )
			}));
		}
	},
	clickType: 'mouse',
	onShapeClick: function( environment, shape ){
		shouldGenerateShapes = true;
		environment.removeShape( shape );
		if( combinations.length === 0 ){
			environment.logger.save();
		}
	},
	homePosition: {
		onEnter: function(){
			if( combinations.length > 0 && shouldGenerateShapes ){
				Pointerly.CURRENT_ENVIRONMENT.generateShapes();
			}
		}
	}
};

Pointerly.Init( setup );

</script>
</body> 
</html>
